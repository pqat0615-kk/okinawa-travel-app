<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸŒŠ æ²–ç¹©è¼•æ—…è¡Œ - My Travel Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <style>
        /* Tailwind CSS å…è¨±åœ¨ <style> æ¨™ç±¤ä¸­åŠ å…¥è‡ªå®šç¾© CSS
        æ²–ç¹©æµ·æ´‹è— (ä¸»è‰²): #66CCFF
        æ·ºèƒŒæ™¯è‰² (åœ–ç‰‡å»¶ä¼¸): #E0F7FF 
        */

        /* 4. å°‡æ•´å€‹ç¶²é çš„èƒŒæ™¯é¡è‰²ä¾ç…§æˆ‘æä¾›çš„åœ–ç‰‡ä¸­çš„åº•è‰²åšå»¶ä¼¸ */
        body {
            background-color: #E0F7FF; /* æ·ºè—è‰²èƒŒæ™¯ */
            font-family: 'å¾®è»Ÿæ­£é»‘é«”', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* é é¦–åœ–ç‰‡å®¹å™¨é«˜åº¦ */
        .header-banner {
            height: 250px; /* 3. åœ–ç‰‡å®¹å™¨é«˜åº¦ç‚º250 */
            position: relative;
        }

        /* é é¦–åœ–ç‰‡èˆ‡ç™½åº•åœ“å¼§éŠœæ¥: åœ“å¼§å’Œè² é‚Šè· */
        .header-arc {
            position: absolute;
            bottom: -50px; /* åœ“å¼§åº•éƒ¨è¶…å‡ºå®¹å™¨ï¼Œè£½é€ é‡ç–Šæ•ˆæœ */
            left: 0;
            right: 0;
            height: 100px;
            background-color: white; /* ä¸‹æ–¹å…§å®¹å€åŸŸçš„èƒŒæ™¯è‰² */
            border-top-left-radius: 50%; /* åœ“å¼§åŠå¾‘ */
            border-top-right-radius: 50%; /* åœ“å¼§åŠå¾‘ */
            transform: scaleX(1.5); /* è®“åœ“å¼§æ›´å¹³æ»‘åœ°å»¶ä¼¸ */
            z-index: 10;
        }

        /* ç¢ºä¿å…§å®¹å€åŸŸå‘ä¸Šé‡ç–Š */
        .main-content {
            margin-top: -50px; /* 5. åˆ©ç”¨è² é‚Šè·å°‡ä¸‹æ–¹çš„ä¸»å…§å®¹å€åŸŸå‘ä¸Šæ‹‰å‹•é‡ç–Š */
            position: relative;
            z-index: 20;
            background-color: white; /* ä¸»å…§å®¹å€åŸŸç‚ºç™½è‰² */
            padding-top: 20px; /* å…§é‚Šè·ï¼Œé¿å…å…§å®¹è¢«åœ“å¼§é®æ“‹ */
            min-height: calc(100vh - 200px); /* è®“å…§å®¹è¶³å¤ é•· */
        }

        /* è‡ªå®šç¾©æ»¾å‹•æ¢æ¨£å¼ (å¯é¸ï¼Œä½†æ›´å…·æ—¥ç³»ç¾æ„Ÿ) */
        ::-webkit-scrollbar {
            width: 5px;
            height: 5px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #66CCFF;
            border-radius: 10px;
        }
    </style>
</head>

<body>
    <div id="app" class="max-w-md mx-auto shadow-2xl bg-white min-h-screen">
        <header class="header-banner overflow-hidden relative">
            
            <img src="okinawa_photo1.png" alt="æ²–ç¹©æµ·æ´‹é¢¨æ™¯" class="w-full h-full object-cover">
            
            <div class="header-arc"></div>

            <nav class="absolute bottom-0 right-0 z-30 p-4 flex space-x-2 translate-y-1/2">
                <button @click="activeTab = 'itinerary'" class="p-3 bg-white rounded-full shadow-lg transition duration-300" :class="{'text-[#66CCFF] scale-110': activeTab === 'itinerary', 'text-gray-400': activeTab !== 'itinerary'}">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                </button>
                <button @click="activeTab = 'info'" class="p-3 bg-white rounded-full shadow-lg transition duration-300" :class="{'text-[#66CCFF] scale-110': activeTab === 'info', 'text-gray-400': activeTab !== 'info'}">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                </button>
                <button @click="activeTab = 'shopping'" class="p-3 bg-white rounded-full shadow-lg transition duration-300" :class="{'text-[#66CCFF] scale-110': activeTab === 'shopping', 'text-gray-400': activeTab !== 'shopping'}">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"/></svg>
                </button>
                <button @click="activeTab = 'expenses'" class="p-3 bg-white rounded-full shadow-lg transition duration-300" :class="{'text-[#66CCFF] scale-110': activeTab === 'expenses', 'text-gray-400': activeTab !== 'expenses'}">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 10v-1m-7-5h10M4 4h16a1 1 0 011 1v14a1 1 0 01-1 1H4a1 1 0 01-1-1V5a1 1 0 011-1z"/></svg>
                </button>
            </nav>
        </header>

        <main class="main-content p-4 relative">
            
            <div v-show="activeTab === 'itinerary'">
                <h2 class="text-2xl font-bold text-[#66CCFF] mb-4">ğŸ—“ï¸ æ¯æ—¥è¡Œç¨‹è¡¨</h2>

                <div class="flex overflow-x-auto pb-4 mb-4 space-x-4 border-b">
                    <div v-for="day in days" :key="day.date" @click="selectedDate = day.date" 
                         class="flex-shrink-0 text-center p-3 rounded-xl cursor-pointer transition duration-300" 
                         :class="{'bg-[#66CCFF] text-white shadow-lg': selectedDate === day.date, 'bg-gray-100 text-gray-500 hover:bg-gray-200': selectedDate !== day.date}">
                        <div class="text-lg font-bold">{{ day.dayOfWeek }}</div>
                        <div class="text-sm">{{ day.dateNumber }}</div>
                    </div>
                </div>

                <div v-if="weather" class="bg-blue-50 border-l-4 border-[#66CCFF] p-4 mb-4 rounded-lg flex justify-between items-center">
                    <div class="flex items-center space-x-3">
                        <span class="text-3xl">â˜€ï¸</span> 
                        <span class="text-xl font-semibold text-gray-800">{{ weather.temperature }}Â°C</span>
                    </div>
                    <div>
                        <div class="text-sm text-gray-600">é«”æ„Ÿï¼š{{ weather.feelsLike }}Â°C</div>
                        <div class="text-xs text-gray-400">ç•¶å‰æ²–ç¹©é‚£éœ¸</div>
                    </div>
                </div>

                <div class="space-y-4">
                    <div v-for="(item, index) in filteredItinerary" :key="item.id" class="bg-white p-4 rounded-xl shadow-md border-l-4 border-gray-200 transition duration-300 hover:shadow-lg cursor-grab">
                        
                        <div v-if="index > 0" class="flex items-center text-sm text-[#66CCFF] mb-2">
                            <span class="mr-1">ğŸš—</span> 
                            <span>{{ item.travelTime }} ({{ item.transportation }})</span>
                        </div>

                        <div v-if="item.type === 'flight' && item.day === 'Day1'" class="bg-[#E0F7FF] p-3 rounded-lg border border-[#66CCFF]">
                            <p class="font-bold text-lg text-[#66CCFF]">âœˆï¸ {{ item.name }} ({{ item.flightNumber }})</p>
                            <div class="flex justify-between text-sm mt-1">
                                <span>{{ item.departureAirport }} {{ item.departureTime }}</span>
                                <span>â†’</span>
                                <span>{{ item.arrivalAirport }} {{ item.arrivalTime }}</span>
                            </div>
                        </div>

                        <div v-else class="flex justify-between items-start">
                            <div @click="openGoogleMaps(item.name)" class="flex-grow cursor-pointer">
                                <p class="text-lg font-bold text-gray-800">{{ item.name }}</p>
                                <p v-if="item.openingHours" class="text-sm text-gray-600">ğŸ•˜ ç‡Ÿæ¥­ï¼š{{ item.openingHours }}</p>
                                <p v-if="item.ticket" class="text-sm text-red-500">ğŸŸï¸ é–€ç¥¨ï¼š{{ item.ticket }}</p>
                                <p v-if="item.notes" class="text-sm text-gray-500 mt-1">ğŸ“ å‚™è¨»ï¼š{{ item.notes }}</p>
                            </div>
                            <button @click="editItem(item)" class="text-gray-400 hover:text-[#66CCFF] ml-4 flex-shrink-0">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zm-1.414 7.07l.707.707-2.828 2.828-.707-.707 2.828-2.828zM10 5a5 5 0 0110 0v10a5 5 0 01-10 0V5z" clip-rule="evenodd"/></svg>
                            </button>
                        </div>
                    </div>
                </div>

                <button @click="openAddModal" class="fixed bottom-4 right-4 p-4 bg-[#66CCFF] text-white rounded-full shadow-xl hover:bg-blue-400 transition duration-300 z-50">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
                </button>
            </div>

            <div v-show="activeTab === 'info'">
                <h2 class="text-2xl font-bold text-[#66CCFF] mb-4">â„¹ï¸ æ—…éŠè³‡è¨Š</h2>
                
                <div class="bg-blue-50 p-4 rounded-xl mb-6 border border-[#66CCFF]">
                    <h3 class="font-bold text-xl text-gray-700 mb-3">ğŸ’µ åŒ¯ç‡æ›ç®— (JPY â†’ TWD)</h3>
                    <div class="flex items-center space-x-2">
                        <input type="number" v-model.number="jpyAmount" placeholder="è¼¸å…¥æ—¥å¹£é‡‘é¡" class="w-1/2 p-2 border rounded-lg focus:ring-[#66CCFF] focus:border-[#66CCFF]">
                        <span class="text-lg font-semibold">JPY</span>
                    </div>
                    <div class="mt-3 text-2xl font-bold text-green-600">
                        = {{ twdAmount.toFixed(2) }} TWD
                    </div>
                    <p class="text-xs text-gray-400 mt-2">ï¼ˆä»¥ç•¶æ—¥åŒ¯ç‡ {{ exchangeRate }} è¨ˆç®—ï¼‰</p>
                </div>

                <div class="mb-6">
                    <h3 class="font-bold text-xl text-gray-700 mb-3">âœˆï¸ èˆªç­è³‡è¨Š</h3>
                    <div class="bg-gray-50 p-4 rounded-xl shadow-sm mb-3">
                        <p class="font-bold text-[#66CCFF] mb-1">å»ç¨‹: KHH â†’ OKA (1/3)</p>
                        <p class="text-sm">IT288: 9:45 (èµ·é£›) â†’ 12:30 (æŠµé”)</p>
                        <p class="text-xs text-gray-500">é£›è¡Œæ™‚é–“: 1å°æ™‚45åˆ† (éœ€é€é API è¨ˆç®—æˆ–æ‰‹å‹•å¡«å…¥)</p>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-xl shadow-sm">
                        <p class="font-bold text-[#66CCFF] mb-1">å›ç¨‹: OKA â†’ KHH (1/6)</p>
                        <p class="text-sm">SL391: 11:50 (èµ·é£›) â†’ 12:40 (æŠµé”)</p>
                        <p class="text-xs text-gray-500">é£›è¡Œæ™‚é–“: 0å°æ™‚50åˆ† (éœ€é€é API è¨ˆç®—æˆ–æ‰‹å‹•å¡«å…¥)</p>
                    </div>
                </div>

                <div>
                    <h3 class="font-bold text-xl text-gray-700 mb-3">ğŸ¨ ä½å®¿è³‡è¨Š</h3>
                    <div class="bg-gray-50 p-4 rounded-xl shadow-sm">
                        <p class="font-bold text-[#66CCFF] text-lg">Okinawa NaHaNa hotel&Spa</p>
                        <p class="text-sm text-gray-700 mt-1">ğŸ“ é›»è©±: +81-98-866-5151 (ç¯„ä¾‹)</p>
                        <p class="text-sm text-gray-700">ğŸ“ åœ°å€: 2-3-1 Matsuo, Naha, Okinawa 900-0014 Japan (ç¯„ä¾‹)</p>
                        <a href="#" @click.prevent="openGoogleMaps('Okinawa NaHaNa hotel&Spa')" class="inline-flex items-center text-sm text-red-500 mt-2 hover:underline">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/></svg>
                            é–‹å•Ÿå°èˆª
                        </a>
                    </div>
                </div>
            </div>

            <div v-show="activeTab === 'shopping'">
                <h2 class="text-2xl font-bold text-[#66CCFF] mb-4">ğŸ›’ è³¼ç‰©æ¸…å–®</h2>

                <div class="space-y-3">
                    <div v-for="item in shoppingList" :key="item.id" class="flex items-center bg-gray-50 p-3 rounded-lg shadow-sm">
                        <div v-if="item.image" class="w-12 h-12 bg-gray-200 rounded-lg mr-3 overflow-hidden">
                            <img :src="item.image" alt="å•†å“åœ–ç‰‡" class="w-full h-full object-cover">
                        </div>
                        <div class="flex-grow">
                            <p class="font-semibold text-gray-800">{{ item.name }}</p>
                        </div>
                        <button @click="deleteShoppingItem(item.id)" class="text-red-400 hover:text-red-600">
                             <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                        </button>
                    </div>
                </div>

                <button @click="openAddShoppingModal" class="fixed bottom-4 right-4 p-4 bg-[#66CCFF] text-white rounded-full shadow-xl hover:bg-blue-400 transition duration-300 z-50">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
                </button>
            </div>

            <div v-show="activeTab === 'expenses'">
                <h2 class="text-2xl font-bold text-[#66CCFF] mb-4">ğŸ’° èŠ±è²»ç´€éŒ„</h2>

                <div class="bg-red-50 p-4 rounded-xl mb-6 border border-red-400 text-center">
                    <p class="text-sm font-semibold text-gray-600">ç¸½èŠ±è²» (JPY)</p>
                    <p class="text-3xl font-bold text-red-600">{{ totalExpenses.toLocaleString() }} JPY</p>
                    <p class="text-sm text-gray-500 mt-1">ç´„ {{ (totalExpenses * exchangeRate).toFixed(0).toLocaleString() }} TWD</p>
                </div>

                <div class="space-y-3">
                    <div v-for="expense in expenses" :key="expense.id" class="bg-gray-50 p-3 rounded-lg shadow-sm flex justify-between items-center">
                        <div>
                            <p class="font-semibold text-gray-800">{{ expense.name }}</p>
                            <p class="text-xs text-gray-500">{{ expense.date }} | {{ expense.category }} ({{ expense.payment }})</p>
                        </div>
                        <p class="font-bold text-lg text-red-500">{{ expense.amount.toLocaleString() }} JPY</p>
                    </div>
                </div>

                <button @click="openAddExpenseModal" class="fixed bottom-4 right-4 p-4 bg-[#66CCFF] text-white rounded-full shadow-xl hover:bg-blue-400 transition duration-300 z-50">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
                </button>
            </div>
            
            <div v-if="isModalOpen" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="bg-white p-6 rounded-xl shadow-2xl max-w-sm w-full">
                    <h3 class="text-xl font-bold text-[#66CCFF] mb-4">æ–°å¢/ç·¨è¼¯é …ç›®</h3>
                    <p>é€™è£¡æ˜¯ç”¨ä¾†æ–°å¢æˆ–ç·¨è¼¯è¡Œç¨‹ã€è³¼ç‰©æ¸…å–®æˆ–èŠ±è²»çš„è¡¨å–®ã€‚</p>
                    <button @click="isModalOpen = false" class="mt-4 w-full p-2 bg-gray-200 rounded-lg hover:bg-gray-300">é—œé–‰</button>
                </div>
            </div>

        </main>
    </div>

    <script>
        const { createApp, ref, computed } = Vue

        createApp({
            setup() {
                const activeTab = ref('itinerary')
                const selectedDate = ref('2026-01-03') // åˆå§‹é¸ä¸­ Day1
                const isModalOpen = ref(false)
                
                // åŒ¯ç‡æ›ç®—ç‹€æ…‹
                const exchangeRate = 0.22 // ç¯„ä¾‹åŒ¯ç‡ï¼Œå¯¦éš›éœ€é€é API ç²å–
                const jpyAmount = ref(0)
                const twdAmount = computed(() => jpyAmount.value * exchangeRate)

                // ç¯„ä¾‹è³‡æ–™çµæ§‹
                const itinerary = [
                    // Day 1
                    { id: 1, day: 'Day1', date: '2026-01-03', type: 'flight', name: 'èˆªç­è³‡è¨Š (KHHâ†’OKA)', flightNumber: 'IT288', departureTime: '9:45', arrivalTime: '12:30', departureAirport: 'KHH', arrivalAirport: 'OKA', travelTime: null, transportation: null },
                    { id: 2, day: 'Day1', date: '2026-01-03', type: 'other', name: 'åœ¨æ©Ÿå ´å¯„è¡Œæ', openingHours: null, ticket: null, notes: 'åœ¨æ©Ÿå ´å¯„è¡Œæ', travelTime: '15åˆ†', transportation: 'æ­¥è¡Œ' },
                    { id: 3, day: 'Day1', date: '2026-01-03', type: 'sightseeing', name: 'iias (DMMæ°´æ—é¤¨)', openingHours: '10:00-21:00', ticket: 'å¤§äºº 2,400 JPY', notes: 'é¤µè²“é ­é·¹é«”é©—', travelTime: '20åˆ†', transportation: 'å¤§çœ¾é‹è¼¸' },
                    { id: 4, day: 'Day1', date: '2026-01-03', type: 'food', name: 'ç€¨é•·å³¶ å¹¸ç¦é¬†é¤…', openingHours: '10:00-19:30', ticket: null, notes: 'å…ˆæ‹¿è™Ÿç¢¼ç‰Œ', travelTime: '15åˆ†', transportation: 'å¤§çœ¾é‹è¼¸' },
                    { id: 5, day: 'Day1', date: '2026-01-03', type: 'food', name: 'æ²–ç¹©è¦è¦é£¯', openingHours: '11:00-21:00', ticket: null, notes: null, travelTime: '10åˆ†', transportation: 'æ­¥è¡Œ' },
                    { id: 6, day: 'Day1', date: '2026-01-03', type: 'food', name: 'åœ‹éš›é€šæ™šé¤: yakiniku horumon nakama', openingHours: '17:00-23:00', ticket: null, notes: 'ç‡’è‚‰åƒåˆ°é£½', travelTime: '30åˆ†', transportation: 'å¤§çœ¾é‹è¼¸' },
                    // Day 2
                    { id: 7, day: 'Day2', date: '2026-01-04', type: 'other', name: 'é£¯åº—é›†åˆ', openingHours: '7:30', ticket: null, notes: '7:30é£¯åº—é›†åˆ', travelTime: '0åˆ†', transportation: null },
                    { id: 8, day: 'Day2', date: '2026-01-04', type: 'sightseeing', name: 'è³é¯¨èˆ¹', openingHours: '8:00å‡ºç™¼', ticket: '6,000 JPY', notes: '13:00çµæŸ', travelTime: '25åˆ†', transportation: 'å¤§çœ¾é‹è¼¸' },
                    { id: 9, day: 'Day2', date: '2026-01-04', type: 'food', name: 'ç¾åœ‹æ‘æ™šé¤: steak88', openingHours: '11:00-22:00', ticket: null, notes: null, travelTime: '45åˆ†', transportation: 'é–‹è»Š' },
                    // Day 3
                    { id: 10, day: 'Day3', date: '2026-01-05', type: 'sightseeing', name: 'æ³¢ä¸Šå®®', openingHours: '9:00 (å¾¡å®ˆé–‹å§‹è²©è³£)', ticket: null, notes: 'æ­¥è¡Œè‡³æ³¢ä¸Šå®®', travelTime: '15åˆ†', transportation: 'æ­¥è¡Œ' },
                    { id: 11, day: 'Day3', date: '2026-01-05', type: 'food', name: 'æ•˜æ•˜è‹‘ (æ­Œç”ºç«™)', openingHours: '12:15 (é ç´„)', ticket: null, notes: 'æ­¥è¡Œè‡³è¼•è»Œæ­åˆ°æ­Œç”ºç«™', travelTime: '30åˆ†', transportation: 'å¤§çœ¾é‹è¼¸' },
                    { id: 12, day: 'Day3', date: '2026-01-05', type: 'shopping', name: 'Parco city', openingHours: '10:00-22:00', ticket: null, notes: null, travelTime: '15åˆ†', transportation: 'é–‹è»Š' },
                    { id: 13, day: 'Day3', date: '2026-01-05', type: 'shopping', name: 'Aeon mall', openingHours: '10:00-22:00', ticket: null, notes: null, travelTime: '10åˆ†', transportation: 'é–‹è»Š' },
                    // Day 4
                    { id: 14, day: 'Day4', date: '2026-01-06', type: 'other', name: 'é›¢é–‹é£¯åº—å‰å¾€æ©Ÿå ´', openingHours: '9:00', ticket: null, notes: null, travelTime: '30åˆ†', transportation: 'å¤§çœ¾é‹è¼¸' },
                    { id: 15, day: 'Day4', date: '2026-01-06', type: 'flight', name: 'èˆªç­è³‡è¨Š (OKAâ†’KHH)', flightNumber: 'SL391', departureTime: '11:50', arrivalTime: '12:40', departureAirport: 'OKA', arrivalAirport: 'KHH', travelTime: null, transportation: null },
                ]

                const shoppingList = ref([
                    { id: 1, name: 'ç´…èŠ‹è›‹å¡”', image: null },
                    { id: 2, name: 'é›ªé¹½é‡‘æ¥šç³•', image: null },
                ])

                const expenses = ref([
                    { id: 1, category: 'ä½å®¿', name: 'é£¯åº—è²»ç”¨', date: '2026-01-03', amount: 35000, payment: 'ä¿¡ç”¨å¡', notes: null },
                    { id: 2, category: 'é£²é£Ÿ', name: 'åˆé¤ DMM æ°´æ—é¤¨', date: '2026-01-03', amount: 2500, payment: 'ç¾é‡‘', notes: null },
                    { id: 3, category: 'é–€ç¥¨', name: 'DMM æ°´æ—é¤¨é–€ç¥¨', date: '2026-01-03', amount: 2400, payment: 'ç¾é‡‘', notes: null },
                ])

                // æ ¹æ“šè¡Œç¨‹è³‡è¨Šç”Ÿæˆæ—¥æœŸé¸å–®
                const days = computed(() => {
                    const dateMap = {};
                    itinerary.forEach(item => {
                        if (!dateMap[item.date]) {
                            const dateObj = new Date(item.date);
                            dateMap[item.date] = {
                                date: item.date,
                                // Fri 6 æ ¼å¼
                                dayOfWeek: dateObj.toLocaleDateString('en-US', { weekday: 'short' }),
                                dateNumber: dateObj.getDate(),
                            };
                        }
                    });
                    return Object.values(dateMap).sort((a, b) => new Date(a.date) - new Date(b.date));
                });
                
                // ç¯©é¸ç•¶å‰é¸æ“‡æ—¥æœŸçš„è¡Œç¨‹
                const filteredItinerary = computed(() => {
                    return itinerary.filter(item => item.date === selectedDate.value);
                });

                // ç¸½èŠ±è²»è¨ˆç®—
                const totalExpenses = computed(() => {
                    return expenses.value.reduce((sum, item) => sum + item.amount, 0);
                });

                // ç¯„ä¾‹å¤©æ°£è³‡è¨Š
                const weather = ref({
                    icon: 'â˜€ï¸',
                    temperature: 20,
                    feelsLike: 22,
                })

                // Google Maps å°èˆªåŠŸèƒ½ (å¯¦éš›æ‡‰ç”¨éœ€è¦ Google Maps API)
                const openGoogleMaps = (locationName) => {
                    const mapUrl = `https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(locationName)}&travelmode=driving`;
                    window.open(mapUrl, '_blank');
                }

                // æ¨¡æ…‹æ¡†é–‹å•Ÿæ–¹æ³•
                const openAddModal = () => { isModalOpen.value = true; }
                const openAddShoppingModal = () => { isModalOpen.value = true; }
                const openAddExpenseModal = () => { isModalOpen.value = true; }
                const editItem = (item) => { isModalOpen.value = true; /* å¯¦éš›æ‡‰å¸¶å…¥ item è³‡æ–™ */ }
                
                // è³¼ç‰©æ¸…å–®åˆªé™¤ (ç¯„ä¾‹)
                const deleteShoppingItem = (id) => {
                    if (confirm('ç¢ºå®šè¦åˆªé™¤æ­¤å•†å“å—ï¼Ÿ')) {
                        shoppingList.value = shoppingList.value.filter(item => item.id !== id);
                    }
                }

                return {
                    activeTab,
                    selectedDate,
                    isModalOpen,
                    days,
                    filteredItinerary,
                    shoppingList,
                    expenses,
                    totalExpenses,
                    exchangeRate,
                    jpyAmount,
                    twdAmount,
                    weather,
                    openGoogleMaps,
                    openAddModal,
                    openAddShoppingModal,
                    openAddExpenseModal,
                    editItem,
                    deleteShoppingItem
                }
            }
        }).mount('#app')
    </script>
</body>

</html>
